import { CodePreviewer } from '@/components/custom/code-previewer';
import { Tooltip, TooltipContent, TooltipText } from '@/components/ui/tooltip';
import { Button, ButtonText } from '@/components/ui/button';
import {
  Avatar,
  AvatarGroup,
  AvatarFallbackText,
} from '@/components/ui/avatar';
import { HStack } from '@/components/ui/hstack';
import { Text } from '@/components/ui/text';
import { Box } from '@/components/ui/box';
import { Heading } from '@/components/ui/heading';
import { VStack } from '@/components/ui/vstack';
import { Center } from '@/components/ui/center';
import { EditIcon, Icon } from '@/components/ui/icon';
import { Command } from 'lucide-react-native';

import { Tabs, TabItem } from '@/docs-components/tabs';
import {
  Table,
  TableHeader,
  TableCell,
  TableHeaderCell,
  TableBody,
  TableRow,
} from '@/docs-components/table';
import { InlineCode } from '@/docs-components/inline-code';
import { AnatomyImage } from '@/docs-components/anatomy-image';

# Tooltip

Create an intuitive UI using the gluestack-ui Tooltip component in React & React Native. Add hints & tooltips seamlessly.

This is an illustration of **Tooltip** component.

#### Basic

<CodePreviewer
  code={`function Example() {
  return (
    <Tooltip
      placement="{{placement}}"
      trigger={(triggerProps) => {
        return (
          <Button {...triggerProps}>
            <ButtonText>Hover on me!</ButtonText>
          </Button>
        )
      }}
    >
      <TooltipContent>
        <TooltipText>Tooltip</TooltipText>
      </TooltipContent>
    </Tooltip>
  )
}`}
  argTypes={{
    placement: {
      control: {
        type: 'select',
      },
      options: [
        'top',
        'top left',
        'top right',
        'bottom',
        'bottom left',
        'bottom right',
        'left',
        'left top',
        'left bottom',
        'right',
        'right top',
        'right bottom',
      ],
      defaultValue: 'top',
    },
  }}
  reactLive={{ Tooltip, TooltipContent, TooltipText, Button, ButtonText }}
  importMap={{
    '@/components/ui/tooltip': ['Tooltip', 'TooltipContent', 'TooltipText'],
    '@/components/ui/button': ['Button', 'ButtonText'],
  }}
/>

<br />
## Installation

<Tabs>
<TabItem label="CLI">

### Run the following command:

```bash
npx gluestack-ui add tooltip
```

</TabItem>
<TabItem label="Manual">

### Step 1: Install the following dependencies:

```bash
npm i @gluestack-ui/tooltip @legendapp/motion
```

> Note: At present, we have integrated the `@legendapp/motion` for animation. You have the option to remove this and implement your own custom animation wrapper.

### Step 2: Copy and paste the following code into your project.

```jsx
'use client';
import React from 'react';
import { createTooltip } from '@/components/ui/tooltip/creator';
import { View, Text, ViewStyle } from 'react-native';
import type { VariantProps } from '@/utils/gluestack-utils/nativewind/utils';
import { tva } from '@/utils/gluestack-utils/nativewind/utils';
import { withStyleContext } from '@/utils/gluestack-utils/nativewind/utils/withStyleContext';
import {
  Motion,
  AnimatePresence,
  MotionComponentProps,
} from '@legendapp/motion';
import { cssInterop } from 'nativewind';

type IMotionViewProps = React.ComponentProps<typeof View> &
  MotionComponentProps<typeof View, ViewStyle, unknown, unknown, unknown>;

const MotionView = Motion.View as React.ComponentType<IMotionViewProps>;

export const UITooltip = createTooltip({
  Root: withStyleContext(View),
  Content: MotionView,
  Text: Text,
  AnimatePresence: AnimatePresence,
});

cssInterop(MotionView, { className: 'style' });

const tooltipStyle = tva({
  base: 'w-full h-full web:pointer-events-none',
});

const tooltipContentStyle = tva({
  base: 'py-1 px-3 rounded-sm bg-background-900 web:pointer-events-auto',
});

const tooltipTextStyle = tva({
  base: 'font-normal tracking-normal web:select-none text-xs text-typography-50',

  variants: {
    isTruncated: {
      true: {
        props: 'line-clamp-1 truncate',
      },
    },
    bold: {
      true: 'font-bold',
    },
    underline: {
      true: 'underline',
    },
    strikeThrough: {
      true: 'line-through',
    },
    size: {
      '2xs': 'text-2xs',
      'xs': 'text-xs',
      'sm': 'text-sm',
      'md': 'text-base',
      'lg': 'text-lg',
      'xl': 'text-xl',
      '2xl': 'text-2xl',
      '3xl': 'text-3xl',
      '4xl': 'text-4xl',
      '5xl': 'text-5xl',
      '6xl': 'text-6xl',
    },
    sub: {
      true: 'text-xs',
    },
    italic: {
      true: 'italic',
    },
    highlight: {
      true: 'bg-yellow-500',
    },
  },
});

type ITooltipProps = React.ComponentProps<typeof UITooltip> &
  VariantProps<typeof tooltipStyle> & { className?: string };
type ITooltipContentProps = React.ComponentProps<typeof UITooltip.Content> &
  VariantProps<typeof tooltipContentStyle> & { className?: string };
type ITooltipTextProps = React.ComponentProps<typeof UITooltip.Text> &
  VariantProps<typeof tooltipTextStyle> & { className?: string };

const Tooltip = React.forwardRef<
  React.ComponentRef<typeof UITooltip>,
  ITooltipProps
>(function Tooltip({ className, ...props }, ref) {
  return (
    <UITooltip
      ref={ref}
      className={tooltipStyle({ class: className })}
      {...props}
    />
  );
});

const TooltipContent = React.forwardRef<
  React.ComponentRef<typeof UITooltip.Content>,
  ITooltipContentProps & { className?: string }
>(function TooltipContent({ className, ...props }, ref) {
  return (
    <UITooltip.Content
      ref={ref}
      {...props}
      className={tooltipContentStyle({
        class: className,
      })}
      pointerEvents="auto"
    />
  );
});

const TooltipText = React.forwardRef<
  React.ComponentRef<typeof UITooltip.Text>,
  ITooltipTextProps & { className?: string }
>(function TooltipText({ size, className, ...props }, ref) {
  return (
    <UITooltip.Text
      ref={ref}
      className={tooltipTextStyle({ size, class: className })}
      {...props}
    />
  );
});

Tooltip.displayName = 'Tooltip';
TooltipContent.displayName = 'TooltipContent';
TooltipText.displayName = 'TooltipText';

export { Tooltip, TooltipContent, TooltipText };

```

### Step 3: Update the import paths to match your project setup.

</TabItem>
</Tabs>

## API Reference

To use this component in your project, include the following import statement in your file.

```ts
import { Tooltip } from '@/components/ui/tooltip';
```

<AnatomyImage
  mobileUrl="https://i.imgur.com/ORGCmyK.png"
  webUrl="https://i.imgur.com/O8BeXgi.png"
  classNameStyle="aspect-[513/242] md:aspect-[736/170]"
/>

```ts
export default () => (
  <Tooltip>
    <TooltipContent>
      <TooltipText />
    </TooltipContent>
  </Tooltip>
);
```

### Component Props

This section provides a comprehensive reference list for the component props, detailing descriptions, properties, types, and default behavior for easy project integration.

#### Tooltip

It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view) component.

<Table>
  <TableHeader>
    <TableRow>
      <TableHeaderCell>Prop</TableHeaderCell>
      <TableHeaderCell>Type</TableHeaderCell>
      <TableHeaderCell>Default</TableHeaderCell>
      <TableHeaderCell>Description</TableHeaderCell>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell>
        <InlineCode>isOpen</InlineCode>
      </TableCell>
      <TableCell>boolean</TableCell>
      <TableCell>false</TableCell>
      <TableCell>
        Whether the tooltip is opened. Useful for controlling the open state.
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>isDisabled</InlineCode>
      </TableCell>
      <TableCell>boolean</TableCell>
      <TableCell>false</TableCell>
      <TableCell>Whether the tooltip is disabled.</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>defaultIsOpen</InlineCode>
      </TableCell>
      <TableCell>boolean</TableCell>
      <TableCell>false</TableCell>
      <TableCell>If true, the popover will be opened by default.</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>onOpen</InlineCode>
      </TableCell>
      <TableCell>() => void</TableCell>
      <TableCell>true</TableCell>
      <TableCell>
        This function will be invoked when the tooltip is opened.
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>onClose</InlineCode>
      </TableCell>
      <TableCell>() => void</TableCell>
      <TableCell>-</TableCell>
      <TableCell>
        This function will be invoked when tooltip is closed. It will also be
        called when the user attempts to close the tooltip via Escape key or
        backdrop press.
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>openDelay</InlineCode>
      </TableCell>
      <TableCell>number</TableCell>
      <TableCell>0</TableCell>
      <TableCell>Duration in ms to wait till displaying the tooltip.</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>closeDelay</InlineCode>
      </TableCell>
      <TableCell>number</TableCell>
      <TableCell>0</TableCell>
      <TableCell>Duration in ms to wait till hiding the tooltip.</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>placement</InlineCode>
      </TableCell>
      <TableCell>
        "bottom" | "top" | "right" | "left" | "top left" | "top right" | "bottom
        left" | "bottom right" | "right top" | "right bottom" | "left top" |
        "left bottom"
      </TableCell>
      <TableCell>bottom left</TableCell>
      <TableCell>Tooltip placement</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>children</InlineCode>
      </TableCell>
      <TableCell>any</TableCell>
      <TableCell>-</TableCell>
      <TableCell>The content to display inside the tooltip.</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>closeOnClick</InlineCode>
      </TableCell>
      <TableCell>boolean</TableCell>
      <TableCell>true</TableCell>
      <TableCell>Whether tooltip should be closed on Trigger click.</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>trigger</InlineCode>
      </TableCell>
      <TableCell>() => any</TableCell>
      <TableCell>-</TableCell>
      <TableCell>
        Function that returns a React Element. This element will be used as a
        Trigger for the tooltip.
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>offset</InlineCode>
      </TableCell>
      <TableCell>number</TableCell>
      <TableCell>10</TableCell>
      <TableCell>Distance between the trigger and the tooltip.</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>crossOffset</InlineCode>
      </TableCell>
      <TableCell>number</TableCell>
      <TableCell>-</TableCell>
      <TableCell>
        The additional offset applied along the cross axis between the element
        and its trigger element.
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>shouldOverlapWithTrigger</InlineCode>
      </TableCell>
      <TableCell>boolean</TableCell>
      <TableCell>false</TableCell>
      <TableCell>
        Determines whether tooltip content should overlap with the trigger.
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>shouldFlip</InlineCode>
      </TableCell>
      <TableCell>boolean</TableCell>
      <TableCell>true</TableCell>
      <TableCell>
        Whether the element should flip its orientation (e.g. top to bottom or
        left to right) when there is insufficient room for it to render
        completely.
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell>
        <InlineCode>closeOnOverlayClick</InlineCode>
      </TableCell>
      <TableCell>boolean</TableCell>
      <TableCell>true</TableCell>
      <TableCell>Closes tooltip when clicked outside.</TableCell>
    </TableRow>
  </TableBody>
</Table>

#### TooltipText

Contains all text related layout style props and actions. It inherits all the properties of React Native's Text component.

#### TooltipContent

Contains all backdrop related layout style props and actions. It inherits all the properties of React Native's [View](https://reactnative.dev/docs/view) component.

### Accessibility

We have outlined the various features that ensure the Tooltip component is accessible to all users, including those with disabilities. These features help ensure that your application is inclusive and meets accessibility standards. It adheres to the [ WAI-ARIA design pattern](https://www.w3.org/WAI/ARIA/apg/patterns/tooltip/).

### Examples

#### Tooltip with Heading

A tooltip component with an avatar is a user interface element that displays a small pop-up box of additional information when the user hovers over or interacts with an avatar or an icon.

<CodePreviewer
  code={`function App(){
          return (
            <Box className="justify-center h-96">
              <AvatarGroup className="flex-row">
                <Tooltip
                  placement="top"
                  trigger={(triggerProps) => {
                    return (
                      <Avatar
                        size="lg"
                        {...triggerProps}
                        className="border-outline-0 border-2 bg-primary-600"
                      >
                        <AvatarFallbackText>+ 3</AvatarFallbackText>
                      </Avatar>
                    )
                  }}
                >
                  <TooltipContent
                    className="p-4 rounded-md max-w-72 bg-background-50"
                  >
                    <VStack space='md' className="rounded-lg">
                      <Heading size="sm">View all members of this channel</Heading>
                      <Center>
                        <Text className="font-sm">Includes John, Sarah, Mike, Emily</Text>
                        <Text className="font-sm">and David</Text>
                      </Center>
                    </VStack>
                  </TooltipContent>
                </Tooltip>
               <Avatar size="lg"
                    className="border-outline-0 border-2 bg-emerald-600" >
                      <AvatarFallbackText className="text-white">Sandeep Srivastva</AvatarFallbackText>
                </Avatar>
                   <Avatar size="lg" className="border-outline-0 border-2 bg-cyan-600" >
                      <AvatarFallbackText className="text-white">Arjun Kapoor</AvatarFallbackText>
                </Avatar>
                      <Avatar size="lg"
                    className="border-outline-0 border-2 bg-indigo-600" >
                      <AvatarFallbackText className="text-white">Ritik Sharma </AvatarFallbackText>
                </Avatar>
              </AvatarGroup>
            </Box>
          );
        }`}
  argTypes={{}}
  reactLive={{
    Avatar,
    AvatarGroup,
    AvatarFallbackText,
    HStack,
    Tooltip,
    TooltipContent,
    TooltipText,
    Text,
    Box,
    Heading,
    VStack,
    Center,
  }}
  importMap={{
    '@/components/ui/avatar': ['Avatar', 'AvatarGroup', 'AvatarFallbackText'],
    '@/components/ui/hstack': ['HStack'],
    '@/components/ui/tooltip': ['Tooltip', 'TooltipContent', 'TooltipText'],
    '@/components/ui/text': ['Text'],
    '@/components/ui/box': ['Box'],
    '@/components/ui/heading': ['Heading'],
    '@/components/ui/vstack': ['VStack'],
    '@/components/ui/center': ['Center'],
  }}
/>

#### Tooltip with Icon

A tooltip component with an icon is a user interface element that provides contextual information or explanatory text when the user hovers over or interacts with an icon.

<CodePreviewer
  code={`function App(){
          return (
            <Box className="h-96 justify-center">
              <Tooltip
                  placement="top"
                  trigger={(triggerProps) => {
                    return (
                    <Avatar size="md" {...triggerProps} className="bg-primary-600">
                      <Icon as={EditIcon} size="sm" className="text-white"/>
                    </Avatar>
                    )
                  }}
              >
                <TooltipContent
                className="bg-background-50 rounded-md"
                >
                  <Box className="p-2.5">
                    <Text size="sm">New message</Text>
                    <HStack space="xs" className="p-1 ml-3">
                          <Avatar size="xs" className="bg-gray-500 rounded">
                              <Icon as={Command} className="text-typography-0"/>
                          </Avatar>
                          <Avatar size="xs" className="bg-gray-500 rounded">
                            <AvatarFallbackText>N</AvatarFallbackText>
                          </Avatar>
                    </HStack>
                  </Box>
                </TooltipContent>
              </Tooltip>
            </Box>
        );
        }`}
  argTypes={{}}
  reactLive={{
    Avatar,
    AvatarFallbackText,
    HStack,
    Tooltip,
    TooltipContent,
    Text,
    Box,
    Heading,
    EditIcon,
    Command,
    Icon,
  }}
  importMap={{
    '@/components/ui/avatar': ['Avatar', 'AvatarFallbackText'],
    '@/components/ui/hstack': ['HStack'],
    '@/components/ui/tooltip': ['Tooltip', 'TooltipContent'],
    '@/components/ui/text': ['Text'],
    '@/components/ui/box': ['Box'],
    '@/components/ui/heading': ['Heading'],
    '@/components/ui/icon': ['EditIcon', 'Icon'],
    'lucide-react-native': ['Command'],
  }}
/>
