# Generated Files System

This document explains how the generated files system works in this repo and why certain files are gitignored in destination projects.

## Overview

This repository uses a **source-to-destination** file generation system where:

- **Source files** are maintained in the `src/` directory at the root level
- **Mapper scripts** in `scripts/` automatically copy and sync files to destination projects in `apps/`
- **Generated files** in destination projects are gitignored to prevent accidental commits

## File Structure

```
/
├── src/                          # Source files (committed to git)
│   ├── components/ui/           # UI components source
│   ├── utils/gluestack-utils/   # Utility functions source
│   ├── docs-components/         # Documentation components source
│   └── sidebar.json            # Sidebar configuration source
├── scripts/                     # Mapper scripts (committed to git)
│   └── mappers/                # Individual app mappers
└── apps/                       # Destination projects
    ├── website/                # Generated files are gitignored
    ├── starter-kit-next/       # Generated files are gitignored
    ├── starter-kit-expo/       # Generated files are gitignored
    ├── todo-app/               # Generated files are gitignored
    └── kitchen-sink/           # Generated files are gitignored
```

## Generated Files by Destination

### All Apps

The following files are generated in **all** destination apps:

- `components/ui/` - UI components copied from `src/components/ui/`
- `utils/gluestack-utils/` - Utility functions copied from `src/utils/gluestack-utils/`

### Website App Only

Additional files generated only for the website app:

- `components/docs-components/` - Documentation components copied from `src/docs-components/`
- `sidebar.json` - Sidebar configuration copied from `src/sidebar.json`

## How It Works

### 1. Development Workflow

1. **Edit source files** in `src/` directory
2. **Run mapper scripts** using `npm run dev` or specific mapper commands
3. **Files are automatically copied** to destination apps
4. **Generated files are ignored by git** in destination projects

### 2. Mapper Scripts

The mapper system uses:

- `scripts/dev.ts` - Main script that watches for file changes
- `scripts/mappers/` - Individual mappers for each destination app
- File watching and debouncing to handle rapid changes
- Event-based processing (add, change, delete)

### 3. Commands

```bash
# Watch all mappers and sync changes
npm run dev

# Run specific mapper only
npm run dev -- --mapper=website

# One-time sync without watching
npm run dev -- --sync

# Run specific mapper with sync
npm run dev -- --mapper=starter-kit-next --sync
```

## Gitignore Configuration

Each destination app has been configured to ignore generated files:

### Website App (`apps/website/.gitignore`)

```gitignore
# Generated files from src/ - DO NOT COMMIT
# These files are automatically generated by the mapper scripts
components/ui/
components/docs-components/
utils/gluestack-utils/
sidebar.json
```

### Other Apps (`apps/*/\.gitignore`)

```gitignore
# Generated files from src/ - DO NOT COMMIT
# These files are automatically generated by the mapper scripts
components/ui/
utils/gluestack-utils/
```

## Why This System?

### ✅ Benefits

- **Single source of truth** - All components maintained in one place
- **Consistency** - Same components across all apps
- **No duplication** - Avoid copy-paste errors
- **Easy updates** - Change once, update everywhere
- **Clean git history** - Only source changes are committed

### ⚠️ Important Notes

- **Never edit generated files directly** - Changes will be overwritten
- **Always edit source files** in `src/` directory
- **Generated files are local only** - Not committed to git
- **Run mappers after pulling** to sync local generated files

## Developer Guidelines

### For New Developers

1. **Clone the repository**
2. **Install dependencies** with `npm install`
3. **Run initial sync** with `npm run dev -- --sync`
4. **Start development** with `npm run dev` to watch for changes

### When Working on Components

1. **Edit files in `src/components/ui/`** - Never edit in `apps/*/components/ui/`
2. **Test changes** in destination apps
3. **Commit only source files** - Generated files are automatically ignored

### When Working on Destination Apps

1. **Generated files will be present locally** but ignored by git
2. **Don't commit generated files** - They're ignored for a reason
3. **Pull and sync** when switching branches: `npm run dev -- --sync`

### Troubleshooting

- **Missing generated files?** Run `npm run dev -- --sync`
- **Changes not reflecting?** Check if `npm run dev` is running
- **Git trying to commit generated files?** Check `.gitignore` configuration

## File Identification

### Generated Files (DO NOT EDIT)

- Any file in `apps/*/components/ui/`
- Any file in `apps/*/utils/gluestack-utils/`
- `apps/website/components/docs-components/`
- `apps/website/sidebar.json`

### Source Files (EDIT THESE)

- Any file in `src/components/ui/`
- Any file in `src/utils/gluestack-utils/`
- Any file in `src/docs-components/`
- `src/sidebar.json`

## Maintenance

The gitignore rules are maintained in each destination app. If you add new generated file patterns, update the respective `.gitignore` files and this documentation.

For questions or issues with the generated files system, refer to the mapper scripts in `scripts/mappers/` or contact the development team.
